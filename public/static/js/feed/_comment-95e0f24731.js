let forms=$(".post-comment-form");for(let e=0;e<forms.length;e++){let t=forms.eq(e);t.submit((function(e){e.preventDefault(),$.ajax({type:"post",url:t.prop("action"),data:t.serialize(),success:function(e){let n=createComment(e.comment,e.user,e.post);changeCommentCount($(`#comment-span-${e.post._id}`),e.post),delComment($(` #deleteComment-button-${e.comment._id}`,n)),toggleLike($(" .toggle-like",n)),t.find("textarea").val(""),addNoty(e.message)},error:function(e){addNotyError(er.responseText)}})}))}function addNoty(e){new Noty({theme:"nest",text:`${e}`,type:"success",layout:"topCenter",timeout:1500}).show()}function addNotyError(e){new Noty({theme:"nest",text:`${e}`,type:"error",layout:"topCenter",timeout:1500}).show()}function createComment(e,t,n){return $(`#writeComment-${n._id}`).prepend(`\n    \n        <div id="whole-comment-${e._id}" >\n            <img src="${t.avatar}" class=""\n            style="display: inline; height: 30px;width: 30px; border-radius: 50%;"\n            alt="">\n            <div class="card d-inline-flex w-auto h-auto mt-2 pb-2 bg-light comments" id="comment-${e._id}">\n                <div class="card-body bg-transparent pt-1 w-auto pb-0">\n                    <h6 class="d-inline-flex w-100 justify-content-between">\n                        <span>\n                            ${t.name}\n                        </span>\n                            <a \n                            class="d-inline-block ms-5 delete-comment-link"\n                            id = "deleteComment-button-${e._id}"\n                            href="/users/feed/post/delete-comment/${n._id}/${e._id}">\n                                <span class="fw-bold fs-6 mb-3">X</span>\n                            </a>\n                            \n                    </h6>\n                    <p class="mb-0">\n                        ${e.content}\n                    </p>\n                </div>\n            </div>\n\n            <div class="ms-5">\n                \x3c!-- like reply division --\x3e\n                <span style="font-size: 0.8rem;" id="likes-span-${e._id}">\n                    ${e.likes.length}\n                    Like\n                </span>\n\n                <a class="toggle-like" href="/users/feed/post/toggle-like/?likeable=${e._id}&type=Comment">\n                    <div class="d-inline-block ms-3 button">\n                    <i class="far fa-thumbs-up"></i></div>\n                </a>\n            </div>\n\n        </div>\n    `)}function delComment(e){e.click((function(t){t.preventDefault(),$.ajax({type:"get",url:e.prop("href"),success:function(e){$(`#whole-comment-${e.comment._id}`).remove(),changeCommentCount($(`#comment-span-${e.post._id}`),e.post),addNoty(e.message)},error:function(e){addNotyError(e.responseText)}})}))}let delCommentBtns=$(".delete-comment-link");for(let e=0;e<delCommentBtns.length;e++){let t=delCommentBtns.eq(e);console.log(t.prop("href")),t.click((function(e){e.preventDefault(),$.ajax({type:"get",url:t.prop("href"),success:function(e){$(`#whole-comment-${e.comment._id}`).remove(),changeCommentCount($(`#comment-span-${e.post._id}`),e.post),addNoty(e.message)},error:function(e){addNotyError(e.responseText)}})}))}function changeCommentCount(e,t){console.log(e);let n=t.comments.length;n<=1?e.html(`${n} Comment`):e.html(`${n} Comments`)}